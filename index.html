<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantry Order System</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .item-container { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .item-buttons { display: flex; gap: 5px; }
        #order-summary { margin-top: 20px; }
        .discount { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Pantry Order System</h1>

    <label for="order-name">Order Name:</label>
    <input type="text" id="order-name" placeholder="Enter the name for this order">
    
    <div id="item-grid"></div>

    <div class="discount">
        <label><input type="checkbox" id="discount30"> 30% Discount</label>
        <label><input type="checkbox" id="discount40"> 40% Discount</label>
    </div>

    <div id="order-summary">
        <h3>Order Summary</h3>
        <ul id="order-list"></ul>
        <p>Subtotal: $<span id="subtotal">0.00</span></p>
        <button onclick="completeOrder()">Complete Order</button>
        <button onclick="clearOrder()">Clear Order</button>
    </div>

    <script>
        const menuItems = {
            "Sandwiches": [
                { name: "Chicken Sandwich", price: 5.99 },
                { name: "Veggie Sandwich", price: 4.99 },
            ],
            "Beverages": [
                { name: "Coffee", price: 1.99 },
                { name: "Tea", price: 1.49 },
            ]
        };

        let order = {};

        function showQuantityPrompt(name, price) {
            const qty = prompt(`Enter quantity for ${name}:`, "1");
            const quantity = parseInt(qty);

            if (!isNaN(quantity) && quantity > 0) {
                addItemToOrder(name, price, quantity);
            }
        }

        function addItemToOrder(name, price, quantity = 1) {
            if (order[name]) {
                order[name].quantity += quantity;
            } else {
                order[name] = { price, quantity };
            }
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const orderList = document.getElementById("order-list");
            const subtotalElement = document.getElementById("subtotal");
            let subtotal = 0;
            orderList.innerHTML = "";

            for (let name in order) {
                const { price, quantity } = order[name];
                const itemSubtotal = price * quantity;
                subtotal += itemSubtotal;

                const listItem = document.createElement("li");
                listItem.textContent = `${name} x ${quantity} - $${itemSubtotal.toFixed(2)}`;
                orderList.appendChild(listItem);
            }

            const discount30 = document.getElementById("discount30").checked;
            const discount40 = document.getElementById("discount40").checked;

            if (discount30) subtotal *= 0.7;
            if (discount40) subtotal *= 0.6;

            subtotalElement.textContent = subtotal.toFixed(2);
        }

        function clearOrder() {
            order = {};
            updateOrderSummary();
        }

        function completeOrder() {
            const orderName = document.getElementById("order-name").value.trim();
            const subtotal = parseFloat(document.getElementById("subtotal").textContent);

            if (!orderName) {
                alert("Please enter an order name.");
                return;
            }

            if (Object.keys(order).length === 0) {
                alert("Please add at least one item to the order.");
                return;
            }

            const discount30 = document.getElementById("discount30").checked;
            const discount40 = document.getElementById("discount40").checked;
            const discountType = discount30 ? "30%" : discount40 ? "40%" : "No discount";

            const orderSummary = document.getElementById("order-list");
            const orderSummaryText = Array.from(orderSummary.getElementsByTagName("li"))
                .map(item => item.textContent)
                .join("\n");

            const embed = {
                "title": "Order Summary",
                "description": `**Order Name:** ${orderName}\n\n**Discount:** ${discountType}\n\n**Items:**\n${orderSummaryText}`,
                "fields": [
                    {
                        "name": "Subtotal",
                        "value": `$${subtotal.toFixed(2)}`,
                        "inline": true
                    }
                ],
                "color": 0x0099ff
            };

            const orderData = {
                "content": "",
                "embeds": [embed],
                "username": "Pantry",
                "avatar_url": "https://cdn.discordapp.com/attachments/1200122767916412959/1297018173580771358/MomentsRP512x512.png?ex=6733610e&is=67320f8e&hm=1624e8720b56232ea2ae68bcb1bf7449916c9b8b1bac89025753a19a28ae543d&"
            };

            fetch('https://discord.com/api/webhooks/1304933522385010699/_L8gMHmG8VFshVgB4zrINZoX6srFfeoSy7XAtCQS4vhpfJW-Ax2GsbH24UFKCQE4iShy', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(orderData)
            })
            .then(response => {
                if (!response.ok) throw new Error("Network response was not ok");
                alert(`Order completed! Total: $${subtotal.toFixed(2)}`);
                clearOrder();
            })
            .catch(error => {
                alert("There was a problem with your order submission: " + error.message);
            });
        }

        function renderMenu() {
            const itemGrid = document.getElementById("item-grid");
            itemGrid.innerHTML = "";

            for (const category in menuItems) {
                const header = document.createElement("h4");
                header.textContent = category;
                itemGrid.appendChild(header);

                menuItems[category].forEach(({ name, price }) => {
                    const itemContainer = document.createElement("div");
                    itemContainer.className = "item-container";

                    const itemName = document.createElement("div");
                    itemName.className = "item-name";
                    itemName.textContent = name;

                    const itemPrice = document.createElement("div");
                    itemPrice.className = "item-price";
                    itemPrice.textContent = `$${price.toFixed(2)}`;

                    const itemButtons = document.createElement("div");
                    itemButtons.className = "item-buttons";

                    const addOneBtn = document.createElement("button");
                    addOneBtn.className = "add-one-btn";
                    addOneBtn.textContent = "+1";
                    addOneBtn.onclick = () => addItemToOrder(name, price, 1);

                    const addMultiBtn = document.createElement("button");
                    addMultiBtn.className = "add-multi-btn";
                    addMultiBtn.textContent = "+Multiple";
                    addMultiBtn.onclick = () => showQuantityPrompt(name, price);

                    itemButtons.appendChild(addOneBtn);
                    itemButtons.appendChild(addMultiBtn);

                    itemContainer.appendChild(itemName);
                    itemContainer.appendChild(itemPrice);
                    itemContainer.appendChild(itemButtons);

                    itemGrid.appendChild(itemContainer);
                });
            }
        }

        renderMenu();
    </script>
</body>
</html>
